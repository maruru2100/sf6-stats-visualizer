# 🥊 SF6 Stats Manager

ストリートファイター6の公式サイト「Buckler's Booty」から戦績データを自動収集し、Metabaseを用いて詳細な勝率分析やMR推移の可視化を行うためのツール一式です。

## 🌟 主な機能
- **自動データ収集**: Streamlit UIからの手動取得、およびスケジュール設定による定期自動実行。
- **MR推移分析**: 日次での最高MRを記録し、成長をグラフ化。
- **キャラクター別勝率**: 相手キャラごとの勝率を出し、得意・苦手なマッチアップを特定。
- **操作タイプ別分析**: モダン/クラシック別の勝率を出し、対策の進捗を確認。
- **調子の可視化**: 日別の勝率をエリアグラフで表示し、プレイの質を客観的に評価。

## 🛠 テクノロジースタック
- **Python (Playwright)**: ブラウザ自動操作によるスクレイピング
- **Streamlit**: データ収集の管理・ログ確認用GUI
- **PostgreSQL**: 戦績データの蓄積
- **Metabase**: BIツールによるデータビジュアライズ
- **Docker / Docker Compose**: 環境構築の共通化

## 🚀 セットアップ
- 以下の説明はWindows基準です。他OSの方は適宜読み替えてください。

### 1. リポジトリの準備
```cmd
git clone 本リポジトリ
cd sf6-stats-manager
```

### 2. 環境変数の設定
.env.example をコピーして .env を作成し、必要な情報を記入してください。
※ .env は Git 管理から除外（.gitignore）してください。

```cmd
copy .env.example .env
```

- TARGET_PLAYER_ID: あなたの10桁のユーザーID
- MY_PLAYER_NAME: あなたのプレイヤー名（集計用）

### 3. 認証情報の配置
Playwright用のクッキー情報（local_cookies.json）を ./auth/ フォルダ内に配置してください。

### 4. 起動
Dockerを使用してすべてのコンテナを起動します。

```cmd
docker-compose up -d
```

## 📊 アクセス方法
- **管理画面 (Streamlit)**: http://localhost:8501
  - 「今すぐ取得」ボタンを押すと即座にスクレイピングが始まります。
- **分析画面 (Metabase)**: http://localhost:3000
  - 初回起動時にPostgreSQL（ホスト名: db）との接続設定を行ってください。

## ⚠️ 免責事項
- 本ツールは個人による戦績分析および学習を目的としています。
- スクレイピングの実行は、公式サイトのサーバーに負荷をかけないよう適切な頻度（デフォルトでは1日2回）に設定されています。利用規約を遵守し、自己責任で使用してください。
- データの不整合や、サイトの仕様変更による動作停止については責任を負いかねます。

## 📝 ライセンス
このプロジェクトは [MIT License](LICENSE) の下で公開されています。